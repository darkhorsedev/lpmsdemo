
if __name__ == '__main__':
    dir_list = ["./ViolenceDataset/video/Violence/", "./ViolenceDataset/video/NonViolence/"]
    dir_list_out = ["./ViolenceDataset/image/Violence/", "./ViolenceDataset/image/NonViolence/"]
    for k, src in enumerate(dir_list):
        video_list = os.listdir(src)
        i = 1
        for video in video_list:
            video = dir_list[k] + video
            vidcap = cv.VideoCapture(video)

            #first read
            success, image = vidcap.read()
            count = 0
            base = os.path.basename(video)
            vname = os.path.splitext(base)[0]

            prev_gray = cv.cvtColor(image, cv.COLOR_BGR2GRAY)
            savepath = ""

            while success:
                count = count+1

                success, image = vidcap.read()
                if (success == False):
                    break

                gray = cv.cvtColor(image, cv.COLOR_BGR2GRAY)

                (score, diff) = compare_ssim(prev_gray, gray, full=True)
                diff = (diff * 255).astype("uint8")

                if (score < 0.85):
                    savepath = dir_list_out[k] + vname + "frame%05d.jpg" % count
                    cv.imwrite(savepath, image)  # save frame as JPEG file               

                prev_gray = gray                
                count += 1
